<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CraftZones â€” Comments</title>
  <style>
    /* Global styles for the pages */
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      text-align: center;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #3498db;
    }

    .nav-links {
      margin-top: 20px;
    }

    .nav-links a {
      color: #3498db;
      text-decoration: none;
      margin: 0 15px;
      font-size: 18px;
    }

    .nav-links a:hover {
      text-decoration: underline;
    }

    .comment-section {
      margin-top: 40px;
    }

    .comment {
      background-color: #f9f9f9;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
    }

    #comment-box {
      width: 80%;
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ddd;
      margin-bottom: 20px;
    }

    .comment-btn {
      padding: 10px 20px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .comment-btn:hover {
      background-color: #2980b9;
    }

    .comment-list {
      margin-top: 20px;
    }

    .stars {
      font-size: 1.5em;
      color: #f39c12;
      cursor: pointer;
    }

    .stars.selected {
      color: #e67e22;
    }

    .edit-btn, .delete-btn {
      margin-top: 10px;
      padding: 5px 10px;
      background-color: #f39c12;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .edit-btn:hover {
      background-color: #e67e22;
    }

    .delete-btn {
      background-color: #e74c3c;
    }

    .delete-btn:hover {
      background-color: #c0392b;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>Leave a Comment</h1>

    <div class="nav-links">
      <a href="..website/Home/index.html">Home</a>
      <a href="..website/Products/index.html">Products</a>
    </div>

    <div class="comment-section">
      <textarea id="comment-box" placeholder="Write your comment here..."></textarea><br>

      <div class="rating">
        <span class="stars" data-value="1">&#9733;</span>
        <span class="stars" data-value="2">&#9733;</span>
        <span class="stars" data-value="3">&#9733;</span>
        <span class="stars" data-value="4">&#9733;</span>
        <span class="stars" data-value="5">&#9733;</span>
      </div><br>

      <button class="comment-btn" id="submit-comment">Submit Comment</button>

      <div class="comment-list" id="comments-list">
        <!-- Comments will be displayed here -->
      </div>
    </div>
  </div>

  <script>
    // Sterren selecteren
    const stars = document.querySelectorAll('.stars');
    stars.forEach(star => {
      star.addEventListener('click', function() {
        stars.forEach(star => star.classList.remove('selected'));
        this.classList.add('selected');
      });
    });

    // Reacties tonen
    function displayComments() {
      const comments = JSON.parse(localStorage.getItem('comments')) || [];
      const commentsList = document.getElementById('comments-list');
      commentsList.innerHTML = '';
      
      comments.forEach((comment, index) => {
        const commentElement = document.createElement('div');
        commentElement.classList.add('comment');
        commentElement.innerHTML = `
          <p><strong>Rating: ${comment.rating} stars</strong></p>
          <p>${comment.text}</p>
          <button class="edit-btn" data-index="${index}">Edit</button>
          <button class="delete-btn" data-index="${index}">Delete</button>
        `;
        commentsList.appendChild(commentElement);
      });

      // Event listeners voor bewerken en verwijderen
      document.querySelectorAll('.edit-btn').forEach(button => {
        button.addEventListener('click', function() {
          const index = this.getAttribute('data-index');
          editComment(index);
        });
      });

      document.querySelectorAll('.delete-btn').forEach(button => {
        button.addEventListener('click', function() {
          const index = this.getAttribute('data-index');
          deleteComment(index);
        });
      });
    }

    // Reactie bewerken
    function editComment(index) {
      const comments = JSON.parse(localStorage.getItem('comments')) || [];
      const comment = comments[index];
      document.getElementById('comment-box').value = comment.text;
      stars.forEach(star => {
        if (star.dataset.value == comment.rating) {
          star.classList.add('selected');
        }
      });

      document.getElementById('submit-comment').textContent = 'Update Comment';
      document.getElementById('submit-comment').onclick = () => updateComment(index);
    }

    // Reactie bijwerken
    function updateComment(index) {
      const comments = JSON.parse(localStorage.getItem('comments')) || [];
      const commentBox = document.getElementById('comment-box');
      const commentText = commentBox.value.trim();
      const rating = document.querySelector('.stars.selected')?.dataset.value;

      if (commentText && rating) {
        comments[index] = { text: commentText, rating: rating };
        localStorage.setItem('comments', JSON.stringify(comments));
        commentBox.value = '';
        document.getElementById('submit-comment').textContent = 'Submit Comment';
        document.getElementById('submit-comment').onclick = submitComment;
        displayComments(); // Update the comment list
      }
    }

    // Reactie verwijderen
    function deleteComment(index) {
      const comments = JSON.parse(localStorage.getItem('comments')) || [];
      comments.splice(index, 1);
      localStorage.setItem('comments', JSON.stringify(comments));
      displayComments(); // Update the comment list
    }

    // Reactie plaatsen
    function submitComment() {
      const commentBox = document.getElementById('comment-box');
      const commentText = commentBox.value.trim();
      const rating = document.querySelector('.stars.selected')?.dataset.value;

      if (commentText && rating) {
        const comments = JSON.parse(localStorage.getItem('comments')) || [];
        comments.push({ text: commentText, rating: rating });
        localStorage.setItem('comments', JSON.stringify(comments));
        commentBox.value = ''; // Clear the comment box
        displayComments(); // Update the comment list
      }
    }

    // Reacties weergeven bij laden van de pagina
    window.onload = displayComments;

    // Event listener voor het plaatsen van een nieuwe reactie
    document.getElementById('submit-comment').addEventListener('click', submitComment);
  </script>

</body>
</html>
